<html><body><h2 id="dbdesignTtl">5.5 【設問】売上～請求、仕入～支払</h2>
<div class="section">
<p class="txt">まず、現状の業務を説明するので、それを把握した上で、続く問題に答えなさい。</p>
<!--/section--></div>

<h4 class="caption">請求業務</h4>
<div class="section">
<ul>
<li>● 月末になると、翼商事では顧客ごとに顧客の締め日に合わせて請求書を発行します</li>
<li>● 顧客ごとに締め日が異なるため、前月の締め日以降今月の締め日までの売上を抽出し、1か月分の売上を集計し、必要に応じてそれまでの未入金分を含めて請求書を作成・送付します</li>
</ul>
<div class="grayBox">
<p><img src="./images/550-01.gif" width="450" height="285" alt="図5-14 請求書"></p>
<p class="boxTxt">図5-14 請求書</p>
<!--/.grayBox--></div>
<!--/section--></div>

<h4 class="caption">支払業務</h4>
<div class="section">
<ul>
<li>● 翼商事から発注して仕入計上したものは、巽南幸の締め日である20日に、仕入先に対して支払い処理を行います</li>
<li>● 前月20日から今月19日までの仕入れ実績を参照して、1か月分の仕入れ金額を集計し、仕入先から送られてきた請求書と照合します<br>
合致した請求書に基づき、経理部門に支払いを依頼するための「支払い伝票」を発行し、経理部門の承認を経て、支払い処理が行われます</li>
</ul>
<div class="grayBox">
<p><img src="./images/550-02.gif" width="450" height="277" alt="図5-15 支払依頼書"></p>
<p class="boxTxt">図5-15 支払依頼書</p>
<!--/.grayBox--></div>
<!--/section--></div>

<div class="section">
<h4 class="quiz-title">Ｑ&nbsp;問題</h4>
<p class="txt">業務の説明から、概略ER図を作成してください。<br>
概略ER図では、エンティティと一意識別子を記述してください。</p>
<!--/section--></div>

<div class="section">
<h4 class="answer-title">Ｈ&nbsp;ヒント</h4>
<ul>
<li>● 請求エンティティと出荷/売上エンティティの間のリレーションシップのカーディナリティに気をつけましょう</li>
<li>● 請求書発行先の客先担当者と、受注を受けたときの客先担当者は常に同じでしょうか<br>
遣う場合にはそれをどのようにER図に反映させるべきでしょうか。</li>
<li>● 請求書を発行する翼商事の担当者は、受注を受けた担当者と同じでしょうか</li>
<li>● 受注を受けた社員の情報は、社員を評価する際、社員ごとの売上高を集計する際に使用します<br>
同様に受注を受けた部門の情報は、受注を受けた社員が異動で所属部門が変わった場合でも、受注を受けた時点での部門の売上として集計します<br>
これをモデル化する場合、どうすればよいでしょうか</li>
</ul>
<!--/section--></div>

<div class="section">
<h4 class="answer-title">Ａ&nbsp;解答</h4>
<div class="grayBox">
<p><img src="./images/550-03.gif" width="500" height="508" alt="図5-16 解答（受注～請求）"></p>
<p class="boxTxt">図5-16 解答（受注～請求）</p>
<!--/.grayBox--></div>
<h4>解説（注：番号は図中の番号に対応します）</h4>
<ul>
<li>1. 受注を受けた社員が部門を異動した場合でも、売上が当初の部門に計上されるよう、受注エンティティから部門に対してリレーションシップを直接張ります<br>
処理を行った社員の所属する部門ではなく、受注が行われた部門、という意味になります</li>
<li>2. ある程度の規模の会社になると、顧客の発注した部門と、請求書を送付する先の部門は異なる場合があります<br>
そのため、請求エンティティから顧客へのリレーションを、受注とは異なる顧客オカレンスに対して張ります</li>
<li>3. 請求エンティティでは、1か月に一度、顧客ごとに1オカレンスが、顧客の締め日に、前月の締め日から今月までの売上オカレンスを集計して作成されます<br>
請求オカレンスのほうが後に作成されるため、請求側のオブショナリティを任意にします</li>
<li>4. 売掛エンティティには、顧客ごとの、毎月の売掛金合計と、前月の請求に対する入金による消しこみ後の請求残高が管理されます<br>
請求エンティティから、前月分の請求残高を参照する必要があるため、リレーションを引きます<br>
その際、必ずしも参照先の値が入っているとは限らないため、売掛側のオブショナリティは任意です</li>
</ul>
<!--/section--></div>

<div class="section">
<h4 class="answer-title">Ａ&nbsp;解答</h4>
<div class="grayBox">
<p><img src="./images/550-04.gif" width="500" height="487" alt="図5-17 解答（発注～支払）"></p>
<p class="boxTxt">図5-17 解答（発注～支払）</p>
<!--/.grayBox--></div>
<h4>解説</h4>
<p class="txt">「受注～請求」とほぼ同じです。</p>
<!--/section--></div>

</body></html>