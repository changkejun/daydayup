<html><body><h2 id="dbdesignTtl">8.1 物理設計で行うこと</h2>
<div class="section">
<p class="txt">物理設計では、方式設計担当者とともに、最終的なシステム設計書をもとに物理的な配置とベンダー製品の各種機能の使用を決定します。<br>物理設計にあたっては、費用的な観点や信頼性と障害対策に対する方針、物理的なサーバの配置条件など、さまざまな観点から検討する必要があります。</p>
<p class="txt">そこで、ここではデータベース設計上、汎用的に留意しておくべき点に焦点を絞って、Oracleデータベースの設計例を紹介します。<br>物理設計の中でも、最も一般的に行われているファイルの配置について、基本的な考え方と実際のワークシートを使用した設計例を紹介します。</p>
<!--/section--></div>

<h3>8.1.1 データベースファイルの配置（分割の基本的な考え方）</h3>
<h4 class="caption">耐障害性を考慮した配置</h4>
<div class="section">
<p class="txt">制御ファイルは、多重化（最低でも二重化）し、それぞれのファイルを別の物理ボリュームに配置します。</p>
<p class="txt">REDOログファイルは、同一グループに最低2つのメンバーを作成し、多重化します。<br>メンバーは別ボリュームに配置します。</p>
<p class="txt">アーカイブログファイルの出力先をローカルで多重化します。<br>出力先は別ボリュームに配置します。</p>
<p class="txt">SYSTEM表領域にはユーザオブジェクトを格納しないようにします。</p>
<!--/section--></div>

<h4 class="caption">競合を考慮した配置</h4>
<div class="section">
<p class="txt">更新処理の多いシステムでは、REDOログファイルは、できるだけ独立したボリュームに配置し、他のファイルヘの書き込みと競合をおこさないように配置します。<br>索引を多用するシステムでは、索引と表を格納する表領域を分け、物理ボリュームも分けます。</p>
<!--/section--></div>

<h4 class="caption">管理の容易性を考慮した配置</h4>
<div class="section">
<p class="txt">異なる業務で使用するオブジェクトは、なるべく別の表領域に格納します。<br>理由は、障害時の回復処理を考えると、表領域が分かれていれば、ディスク障害が発生したボリュームを使用していた業務のみがディスクを使えないという障害の局所化を実現できるためです。<br>また、オンラインバックアップを取得する際には、表領域が業務ごとに分かれていれば、業務のアクセス頻度に応じて、表領域単位にバックアップを取得する時間帯を考えることができるという利点もあります。</p>
<!--/section--></div>

<h4 class="caption">参考</h4>
<div class="section">
<h5>カットオーバー後の物理配置に関するチューニング</h5>
<ul>
<li>
	● OLTP系のアプリケーション：
	<p>UNDO表領域への書き込みがボトルネックになっていないかを確認します<br>必要に応じて、パラレル書き込みができるような環境に移行します<br>業務用の表領域で、書き込み処理がボトルネックになっている表領域があった場合、そこに格納されているオブジェクトの表領域を分け、さらにボリュームも分けて格納します</p>
</li>
<li>
	● DSS系のアプリケーション：
	<p>一時表領域のエクステントサイズを、大容量のソートをするための初期化パラメータSORT_AREA_SIZEの整数倍に設定し、大容量のソート用の一時表領域を作成します<br>もし、一時表領域への書き込み、読み込みがボトルネックになっている場合、パラレル処理ができるような環境に移行します</p>
</li>
</ul>
<p class="txt"></p>
<!--/section--></div>

<h3>8.1.2 表領域の配置（分割の基本的な考え方）</h3>
<h4 class="caption">管理の容易性を考慮して分割</h4>
<div class="section">
<p class="txt">障害を局所化できるように業務ごとに分けます。</p>
<p class="txt">オンラインバックアップを考えた場合、更新頻度が0のもの、頻度が低いもの、高いものを個別の表領域に分けることによって、バックアップ計画が立てやすくなります。<br>更新頻度が高いものは、バックアップを頻繁に取得して、回復に必要な時間を短くするようにします。<br>更新頻度が低いものは、バックアップの間隔が長くなっても、更新頻度が高いものほど影響は大きくありません。<br>更新頻度が0の読み取り専用表領域を作成し、日常のバックアップ計画からは外しておくようにします。</p>
<!--/section--></div>

<h4 class="caption">表領域の特性と表の特性に応じて分割</h4>
<div class="section">
<p class="txt">エクステントサイズ、ブロックサイズの違いによって分けます。</p>
<!--/section--></div>

<h4 class="caption">競合を考慮して分割</h4>
<div class="section">
<p class="txt">同時にアクセスする可能性の高いオブジェクトは、異なる表領域、異なるボリュームに分けて格納します。<br>表と検索は分けて異なる表領域に格納します。</p>
<!--/section--></div>


<h3>8.1.3 その他</h3>
<div class="section">
<p class="txt">データファイルは管理のしやすさを考慮し、最大でも2GBぐらいの大きさにとどめます。<br>バックアップを取得したり、リカバリ時にリストアする時間を短くすることができます。</p>
<!--/section--></div>


</body></html>